const availableCovers = new Set([
  "9780070181397",
  "9780070663183",
  "9780071314213",
  "9780071398770",
  "9780071469944",
  "9780071605489",
  "9780071752602",
  "9780071752947",
  "9780071772525",
  "9780071775182",
  "9780071790390",
  "9780071797962",
  "9780071802512",
  "9780072126747",
  "9780072228878",
  "9780072816990",
  "9780072851236",
  "9780073523408",
  "9780077144111",
  "9780077331269",
  "9780078210587",
  "9780078253041",
  "9780080489797",
  "9780080495910",
  "9780080890364",
  "9780123540515",
  "9780123694461",
  "9780123751669",
  "9780123820952",
  "9780123849687",
  "9780128182031",
  "9780130282200",
  "9780130909244",
  "9780131378865",
  "9780131395312",
  "9780132171939",
  "9780132397759",
  "9780132404167",
  "9780132469197",
  "9780132783392",
  "9780132983945",
  "9780132983976",
  "9780133016277",
  "9780133038521",
  "9780133057577",
  "9780133061567",
  "9780133118070",
  "9780133435153",
  "9780133479102",
  "9780133591743",
  "9780133793888",
  "9780134658339",
  "9780134764108",
  "9780134778259",
  "9780136886020",
  "9780137084029",
  "9780137084333",
  "9780137142521",
  "9780138993948",
  "9780201354614",
  "9780201383720",
  "9780201403572",
  "9780201733556",
  "9780201756081",
  "9780262132336",
  "9780273759768",
  "9780321174079",
  "9780321678799",
  "9780321718389",
  "9780321719904",
  "9780321772824",
  "9780324259285",
  "9780357674611",
  "9780470149492",
  "9780470242018",
  "9780470260791",
  "9780470479223",
  "9780470493731",
  "9780470570005",
  "9780470977385",
  "9780471522576",
  "9780534366919",
  "9780534950606",
  "9780538470025",
  "9780538474436",
  "9780538747455",
  "9780619016623",
  "9780619017651",
  "9780619034429",
  "9780619064976",
  "9780619121273",
  "9780619160314",
  "9780619217242",
  "9780619243654",
  "9780619254971",
  "9780672315497",
  "9780672330414",
  "9780735605176",
  "9780745662527",
  "9780760011485",
  "9780760011775",
  "9780763737696",
  "9780763790615",
  "9780764577185",
  "9780764584923",
  "9780768692471",
  "9780789560995",
  "9780789700766",
  "9780789742278",
  "9780805303346",
  "9781111222109",
  "9781111306366",
  "9781111529413",
  "9781111532598",
  "9781111825560",
  "9781118026236",
  "9781118052013",
  "9781118134610",
  "9781118204139",
  "9781118234884",
  "9781118235843",
  "9781118236550",
  "9781118237083",
  "9781118239421",
  "9781118240281",
  "9781118318768",
  "9781118356555",
  "9781118417058",
  "9781119225393",
  "9781119301127",
  "9781119495208",
  "9781119940531",
  "9781119963998",
  "9781133190035",
  "9781133191315",
  "9781133526087",
  "9781133593546",
  "9781139487603",
  "9781139496407",
  "9781139500005",
  "9781259080791",
  "9781259563652",
  "9781260548006",
  "9781266816871",
  "9781284033151",
  "9781284074901",
  "9781285082882",
  "9781285867403",
  "9781292052120",
  "9781351621984",
  "9781408048016",
  "9781418835620",
  "9781418859374",
  "9781420087857",
  "9781423902492",
  "9781423902553",
  "9781423902911",
  "9781423903000",
  "9781423925446",
  "9781435453906",
  "9781435454231",
  "9781439079201",
  "9781439080146",
  "9781439081310",
  "9781439867723",
  "9781449374297",
  "9781466511019",
  "9781466588745",
  "9781473768048",
  "9781486002580",
  "9781542453318",
  "9781556223730",
  "9781572314405",
  "9781584505570",
  "9781584505808",
  "9781587131127",
  "9781587133480",
  "9781597495622",
  "9781598633429",
  "9781781579954",
  "9781838828134",
  "9781840785388",
  "9781844803552",
  "9781844808915",
  "9781932159943",
  "9783540287148",
  "9783827330437",
  "9788122416381",
  "9788126508853",
  "9788126509621",
  "9788126532377",
  "9788131501153",
  "9788131502181",
  "9788131701140",
  "9788131711880",
  "9788131716052",
  "9788131724453",
  "9788131725283",
  "9788131726228",
  "9788131754955",
  "9788177582970",
  "9788177586886",
  "9788988730188",
  "9789688802052",
]);

export function renderBooks(books, containerId = "book-list") {
  const container = document.getElementById(containerId);
  container.innerHTML = "";
  if (!books || books.length === 0) {
    container.innerHTML = "<p>No books found.</p>";
    return;
  }

  // No sorting! Just display in backend order.
  books.forEach((book) => {
    const coverSrc = availableCovers.has(book.isbn)
      ? `/STI-DigiLibrary/covers/${book.isbn}.webp`
      : "/STI-DigiLibrary/frontend/assets/owlie_icn_transparent.png";

    const article = document.createElement("article");
    article.className = "book";
    article.innerHTML = `
      <div class="book-image">
        <img src="${coverSrc}" alt="Book Cover"
          onerror="this.onerror=null;this.src='/STI-DigiLibrary/frontend/assets/owlie_icn_transparent.png';" />
      </div>
      <h3>${book.title || ""}</h3>
      <p>Author: ${book.author || "Unknown"}</p>
      <p>ISBN: ${book.isbn || ""}</p>
      <p>Status: ${book.status || "Available"}</p>
      <button>Borrow</button>
    `;
    container.appendChild(article);
  });
}

export function renderBookDetails(book, containerId = "bookDetails") {
  const container = document.getElementById(containerId);
  if (!book) {
    container.innerHTML = "<p>Book not found.</p>";
    return;
  }
  const coverSrc = book.isbn
    ? `/STI-DigiLibrary/covers/${book.isbn}.webp`
    : "/STI-DigiLibrary/frontend/assets/owlie_icn_transparent.png";

  container.innerHTML = `
    <h2>${book.title}</h2>
    <img src="${coverSrc}" alt="Book Cover" style="max-width:200px;"
      onerror="this.onerror=null;this.src='/STI-DigiLibrary/frontend/assets/owlie_icn_transparent.png';" />
    <p><strong>Author:</strong> ${book.author || ""}</p>
    <p><strong>ISBN:</strong> ${book.isbn || ""}</p>
    <p><strong>Status:</strong> ${book.status || "Available"}</p>
    <button>Borrow</button>
  `;
}
